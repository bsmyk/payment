<html>
    <head></head>
    <body>
        <form action="https://kontramedia.github.io/payment/finish.html?v3" class="paymentWidgets">VISA MASTER AMEX</form>
    </body>
    <script>
        var form = document.getElementsByTagName('form')[0];

        function loadPayments() {
            var head = document.getElementsByTagName('head').item(0);
            var script = document.createElement('script');
            script.setAttribute('type', 'text/javascript');
            script.setAttribute('src', 'https://oppwa.com/v1/paymentWidgets.js?checkoutId=' + window.checkoutId);
            head.appendChild(script);
        }

        function init() {
            if (window.checkoutId) {
                loadPayments();
            }
        }

        function whenRNPostMessageReady(cb) {
            console.log('whenRNPostMessageReady');
            if (window.isReady) cb();
            else setTimeout(function() { whenRNPostMessageReady(cb) }, 1000);
        }

        window.addEventListener('DOMContentLoaded', function() {
            console.log('DOMContentLoaded');
            whenRNPostMessageReady(init);
        }, false);
    </script>
</html>
